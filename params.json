{"body":"# puppet-pssh \r\n\r\nPuppet parallel-ssh integration.\r\n\r\nNeeds parallel-ssh installed (apt-get install pssh on Ubuntu/Debian).\r\n\r\n# Install\r\n\r\n    gem install puppet-pssh\r\n\r\n# Usage\r\n\r\nThe command has a built-in help:\r\n\r\n    puppet-pssh --help\r\n\r\nThe run command:\r\n\r\n    puppet-pssh run --puppetmaster 192.168.1.1 \\ \r\n                    --match 'openstack-compute' \\\r\n                    --nameserver 10.0.0.1 \\\r\n                    --no-host-key-verify \\\r\n                    --threads 20 \\                # use up to 20 threads\r\n                    puppet agent -t\r\n\r\nThis will run the command 'puppet agent -t' on every node whose FQDN matches /openstack-compute/ (regexp). It will try to resolve node names using DNS server 10.0.0.1 and use the IP address instead.\r\nAlso, SSH host key verification has been disabled.\r\n    \r\n# Tips\r\n\r\nClean node's /var/lib/puppet and revoke node cert on master also:\r\n\r\n    # Clean /var/lib/puppet in node\r\n    puppet-pssh run 'find /var/lib/puppet -type f|xargs rm'\r\n    # Revoke cert (this will run in the node!)\r\n    puppet-pssh run 'curl -k -X PUT -H \"Content-Type: text/pson\" --data '\\''{\"desired_state\":\"revoked\"}'\\'' https://puppetmaster.devel.bvox.net:8140/development/certificate_status/`hostname -f`'\r\n    puppet-pssh run 'curl -k -X DELETE -H \"Accept: pson\" https://puppetmaster.devel.bvox.net:8140/development/certificate_status/`hostname -f`'\r\n\r\nYour puppet master's auth.conf will need some rules for this to work. See:\r\n\r\nhttp://www.mail-archive.com/puppet-users@googlegroups.com/msg35412.html\r\n\r\n# Copyright\r\n\r\nCopyright (c) 2012 Sergio Rubio. See LICENSE.txt for\r\nfurther details.\r\n\r\n","name":"Puppet-pssh","tagline":"Run commands on multiple puppet nodes using parallel-ssh","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}